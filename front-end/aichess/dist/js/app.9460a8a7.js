(function(){"use strict";var e={3477:function(e,t,n){var r=n(9242),o=n(3396);const a=(0,o.Uk)("AI Chess");function s(e,t){const n=(0,o.up)("router-link"),r=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("nav",null,[(0,o.Wm)(n,{to:"/"},{default:(0,o.w5)((()=>[a])),_:1})]),(0,o.Wm)(r)],64)}var l=n(89);const u={},i=(0,l.Z)(u,[["render",s]]);var c=i,v=n(678),h=n(4870),d=n(7139),f=(0,o.aZ)({props:{rowIndex:null,colIndex:null,state:null},setup(e){const t=e,{state:n}=(0,h.BK)(t),r=()=>"Player1"===n.value?"chess-state--player-1":"Player2"===n.value?"chess-state--player-2":"chess-state--no-chess";return(e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,d.C_)(["chess",r()])},null,2))}});const p=f;var g=p;const y=(e,t)=>{const n=()=>{const n=(0,h.qj)([]);for(let r=0;r<e;r++){n.push([]);for(let e=0;e<t;e++)n[r].push("noChess")}return n},r=n(),o=(e,t,n)=>{r[e][t]=n};return{board:r,changeChessState:o}};var w=y;n(1703);const b=(0,h.iH)(""),P=(0,h.iH)(0),m=(e,t=3e3)=>{b.value=e,P.value=t},k=(e,t)=>{const n=(0,h.iH)("Player1"),r=(0,o.Fl)((()=>"Player1"===n.value?"Player2":"Player1")),a=e=>{n.value=e},s=()=>{"Player1"===n.value?n.value="Player2":n.value="Player1"},l=()=>{for(let n=0;n<e.length;n++)for(let r=0;r<e[0].length;r++)t(n,r,"noChess");a("Player1"),m("请君先手（￣︶￣）↗",3e3)},u=(r,o)=>{if("noChess"!==e[r][o])throw Error(`${r},${o} 必须是无子的!`);t(r,o,n.value),s()},i=e=>-2===e?"Player2":-1===e&&"Player1";return{currentPlayer:n,oppositePlayer:r,changeCurrentPlayerTo:a,NextPlayerTurn:s,initGame:l,putChess:u,getWinner:i}};var C=k,x=n(6265),H=n.n(x);H().defaults.baseURL="";const O=(e,t)=>{const n=(0,h.iH)(!1),r=()=>{n.value=!0,console.log("lock chessRequestingLock")},o=()=>{n.value=!1,console.log("unlock chessRequestingLock")},a=n=>{const r={};for(let t=0;t<e.length;t++)for(let n=0;n<e[0].length;n++)"noChess"!==e[t][n]&&(r[t*e[0].length+n]="Player1"===e[t][n]?1:2);return{states:r,last_move:n,player:"Player1"===t?1:2}},s=(e,t={})=>new Promise(((n,r)=>{H().post(e,t,{baseURL:"http://121.196.239.127:5000/",headers:{"Content-Type":"application/json"}}).then((e=>{n(e)}),(e=>{r(e)}))})),l=async(e,t)=>{r();try{const n=await s(e,a(t));return n.data}catch(n){throw m("(⊙x⊙;) 遇到了故障...",5e3),Error("requestAi post error")}finally{o()}};return{chessRequestingLock:n,lock:r,unlock:o,requestAi:l}};var j=O;const S={class:"container"},_=(0,o._)("div",{class:"dummy"},null,-1),U={class:"board"};var q=(0,o.aZ)({props:{boardHeight:{default:15},boardWidth:{default:15}},setup(e){const t=e,{boardHeight:n,boardWidth:r}=(0,h.BK)(t),{board:a,changeChessState:s}=w(n.value,r.value),{initGame:l,putChess:u,getWinner:i}=C(a,s),{requestAi:c,chessRequestingLock:v}=j(a,"Player2");l();const d=async(e,t)=>{if(v.value)m("等下(￣ ‘i ￣;) 人家还没想完",5e4);else{u(e,t),m("让我想想ヾ(≧▽≦*)",5e4);const n=await c("aichess",e*a[0].length+t),r=i(n);if(r)"Player1"===r?m("不可能的(⊙_⊙)",5e4):"Player2"===r&&m("正常正常~下次再战 ( •̀ .̫ •́ )✧",5e4);else{const e=Math.floor(n/a[0].length),t=n%a[0].length;m(`我要下在 ${e}, ${t} !`,1e3),u(e,t)}}};return(e,t)=>((0,o.wg)(),(0,o.iD)("div",S,[_,(0,o._)("div",U,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,h.SU)(n),(e=>((0,o.wg)(),(0,o.iD)("div",{class:"row",key:"row"+(e-1)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,h.SU)(r),(t=>((0,o.wg)(),(0,o.j4)(g,{key:(e-1).toString()+","+(t-1).toString(),"row-index":e-1,"col-index":t-1,state:(0,h.SU)(a)[e-1][t-1],onClick:n=>d(e-1,t-1)},null,8,["row-index","col-index","state","onClick"])))),128))])))),128))])]))}});const D=q;var W=D;const L=(0,o._)("canvas",{id:"live2d",width:"280",height:"250"},null,-1);var R=(0,o.aZ)({setup(e){(0,o.bv)((()=>{window.loadlive2d("live2d","/live2d/model/tia/model.json")}));const t=(0,o.Fl)((()=>0===P.value)),n=(0,h.iH)(0),a=(0,o.Fl)((()=>0!==n.value));setInterval((()=>{n.value>200?n.value-=200:n.value=0,P.value>200?P.value-=200:P.value=0}),200);const s=()=>{m("你碰不到我(●ˇ∀ˇ●)",1e3),n.value=1e3};return(e,n)=>((0,o.wg)(),(0,o.iD)("div",{class:"wrapper",onMouseover:s,style:(0,d.j5)({opacity:(0,h.SU)(a)?.3:1,"pointer-events":(0,h.SU)(a)?"none":"auto"})},[(0,o.wy)((0,o._)("div",{class:"message"},(0,d.zw)((0,h.SU)(b)),513),[[r.F8,!(0,h.SU)(t)]]),L],36))}});const T=R;var F=T,Z=(0,o.aZ)({setup(e){const t=8,n=8;return(e,r)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(W,{boardHeight:t,"board-height":t,"board-width":n}),(0,o.Wm)(F)],64))}});const A=Z;var I=A;const K=[{path:"/",name:"home",component:I}],M=(0,v.p7)({history:(0,v.PO)("/"),routes:K});var Y=M,$=n(9749),E=(0,$.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,r.ri)(c).use(E).use(Y).mount("#app")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,a){if(!r){var s=1/0;for(c=0;c<e.length;c++){r=e[c][0],o=e[c][1],a=e[c][2];for(var l=!0,u=0;u<r.length;u++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[u])}))?r.splice(u--,1):(l=!1,a<s&&(s=a));if(l){e.splice(c--,1);var i=o();void 0!==i&&(t=i)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,s=r[0],l=r[1],u=r[2],i=0;if(s.some((function(t){return 0!==e[t]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(u)var c=u(n)}for(t&&t(r);i<s.length;i++)a=s[i],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},r=self["webpackChunkaichess"]=self["webpackChunkaichess"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(3477)}));r=n.O(r)})();
//# sourceMappingURL=app.9460a8a7.js.map