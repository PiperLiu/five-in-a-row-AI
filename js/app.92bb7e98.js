(function(){"use strict";var e={6931:function(e,t,n){var r=n(9242),o=n(3396);const a=(0,o.Uk)("AI Chess"),s=(0,o.Uk)(" | "),l=(0,o._)("a",{href:"https://github.com/PiperLiu/five-in-a-row-AI"},"Fork Me On GitHub",-1),i=(0,o.Uk)(" | "),u=(0,o._)("a",{href:"https://piperliu.xyz"},"About Me",-1);function c(e,t){const n=(0,o.up)("router-link"),r=(0,o.up)("router-view");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("nav",null,[(0,o.Wm)(n,{to:"/"},{default:(0,o.w5)((()=>[a])),_:1}),s,l,i,u]),(0,o.Wm)(r)],64)}var h=n(89);const v={},f=(0,h.Z)(v,[["render",c]]);var p=f,d=n(678),g=n(4870),y=n(7139),w=(0,o.aZ)({props:{rowIndex:null,colIndex:null,state:null},setup(e){const t=e,{state:n}=(0,g.BK)(t),r=()=>"Player1"===n.value?"chess-state--player-1":"Player2"===n.value?"chess-state--player-2":"chess-state--no-chess";return(e,t)=>((0,o.wg)(),(0,o.iD)("div",{class:(0,y.C_)(["chess",r()])},null,2))}});const b=w;var m=b;const P=(e,t)=>{const n=()=>{const n=(0,g.qj)([]);for(let r=0;r<e;r++){n.push([]);for(let e=0;e<t;e++)n[r].push("noChess")}return n},r=n(),o=(e,t,n)=>{r[e][t]=n};return{board:r,changeChessState:o}};var k=P;n(1703);const C=(0,g.iH)(""),x=(0,g.iH)(0),H=(e,t=3e3)=>{C.value=e,x.value=t},O=(e,t)=>{const n=(0,g.iH)("Player1"),r=(0,o.Fl)((()=>"Player1"===n.value?"Player2":"Player1")),a=e=>{n.value=e},s=()=>{"Player1"===n.value?n.value="Player2":n.value="Player1"},l=()=>{for(let n=0;n<e.length;n++)for(let r=0;r<e[0].length;r++)t(n,r,"noChess");a("Player1"),H("请君先手（￣︶￣）↗",3e3)},i=(r,o)=>{if("noChess"!==e[r][o])throw Error(`${r},${o} 必须是无子的!`);t(r,o,n.value),s()},u=e=>-2===e?"Player2":-1===e&&"Player1";return{currentPlayer:n,oppositePlayer:r,changeCurrentPlayerTo:a,NextPlayerTurn:s,initGame:l,putChess:i,getWinner:u}};var _=O,U=n(6265),j=n.n(U);j().defaults.baseURL="";const S=(e,t)=>{const n=(0,g.iH)(!1),r=()=>{n.value=!0,console.log("lock chessRequestingLock")},o=()=>{n.value=!1,console.log("unlock chessRequestingLock")},a=n=>{const r={};for(let t=0;t<e.length;t++)for(let n=0;n<e[0].length;n++)"noChess"!==e[t][n]&&(r[t*e[0].length+n]="Player1"===e[t][n]?1:2);return{states:r,last_move:n,player:"Player1"===t?1:2}},s=(e,t={})=>new Promise(((n,r)=>{j().post(e,t,{baseURL:"https://aichess.piperliu.xyz",headers:{"Content-Type":"application/json"}}).then((e=>{n(e)}),(e=>{r(e)}))})),l=async(e,t)=>{r();try{const n=await s(e,a(t));return n.data}catch(n){throw H("(⊙x⊙;) 遇到了故障...",5e3),console.log(n),Error("requestAi post error")}finally{o()}};return{chessRequestingLock:n,lock:r,unlock:o,requestAi:l}};var q=S;const D={class:"container"},W=(0,o._)("div",{class:"dummy"},null,-1),A={class:"board"};var L=(0,o.aZ)({props:{boardHeight:{default:15},boardWidth:{default:15}},setup(e){const t=e,{boardHeight:n,boardWidth:r}=(0,g.BK)(t),{board:a,changeChessState:s}=k(n.value,r.value),{initGame:l,putChess:i,getWinner:u}=_(a,s),{requestAi:c,chessRequestingLock:h}=q(a,"Player2");l();const v=async(e,t)=>{if(h.value)H("等下(￣ ‘i ￣;) 人家还没想完",5e4);else{i(e,t),H("让我想想ヾ(≧▽≦*)",5e4);const n=await c("/",e*a[0].length+t),r=u(n);if(r)"Player1"===r?H("不可能的(⊙_⊙)",5e4):"Player2"===r&&H("正常正常~下次再战 ( •̀ .̫ •́ )✧",5e4);else{const e=Math.floor(n/a[0].length),t=n%a[0].length;H(`我要下在 ${e}, ${t} !`,1e3),i(e,t)}}};return(e,t)=>((0,o.wg)(),(0,o.iD)("div",D,[W,(0,o._)("div",A,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,g.SU)(n),(e=>((0,o.wg)(),(0,o.iD)("div",{class:"row",key:"row"+(e-1)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,g.SU)(r),(t=>((0,o.wg)(),(0,o.j4)(m,{key:(e-1).toString()+","+(t-1).toString(),"row-index":e-1,"col-index":t-1,state:(0,g.SU)(a)[e-1][t-1],onClick:n=>v(e-1,t-1)},null,8,["row-index","col-index","state","onClick"])))),128))])))),128))])]))}});const F=L;var I=F;const M=(0,o._)("canvas",{id:"live2d",width:"280",height:"250"},null,-1);var R=(0,o.aZ)({setup(e){(0,o.bv)((()=>{window.loadlive2d("live2d","live2d/model/tia/model.json")}));const t=(0,o.Fl)((()=>0===x.value)),n=(0,g.iH)(0),a=(0,o.Fl)((()=>0!==n.value));setInterval((()=>{n.value>200?n.value-=200:n.value=0,x.value>200?x.value-=200:x.value=0}),200);const s=()=>{H("你碰不到我(●ˇ∀ˇ●)",1e3),n.value=1e3};return(e,n)=>((0,o.wg)(),(0,o.iD)("div",{class:"wrapper",onMouseover:s,style:(0,y.j5)({opacity:(0,g.SU)(a)?.3:1,"pointer-events":(0,g.SU)(a)?"none":"auto"})},[(0,o.wy)((0,o._)("div",{class:"message"},(0,y.zw)((0,g.SU)(C)),513),[[r.F8,!(0,g.SU)(t)]]),M],36))}});const T=R;var Z=T,K=(0,o.aZ)({setup(e){const t=8,n=8;return(e,r)=>((0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(I,{boardHeight:t,"board-height":t,"board-width":n}),(0,o.Wm)(Z)],64))}});const Y=K;var $=Y;const z=[{path:"/five-in-a-row-AI",name:"chesspage",component:$},{path:"/",name:"home",component:$}],E=(0,d.p7)({history:(0,d.PO)(""),routes:z});var G=E,B=n(9749),N=(0,B.MT)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,r.ri)(p).use(N).use(G).mount("#app")}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,function(){var e=[];n.O=function(t,r,o,a){if(!r){var s=1/0;for(c=0;c<e.length;c++){r=e[c][0],o=e[c][1],a=e[c][2];for(var l=!0,i=0;i<r.length;i++)(!1&a||s>=a)&&Object.keys(n.O).every((function(e){return n.O[e](r[i])}))?r.splice(i--,1):(l=!1,a<s&&(s=a));if(l){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,o,a]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,s=r[0],l=r[1],i=r[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(i)var c=i(n)}for(t&&t(r);u<s.length;u++)a=s[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},r=self["webpackChunkaichess"]=self["webpackChunkaichess"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(6931)}));r=n.O(r)})();
//# sourceMappingURL=app.92bb7e98.js.map